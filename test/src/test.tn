import io;

fn test_func() {
    return 7;
}

fn add(a, b) {
    return a + b;
}

fn assert(a, b, name){
    if a != b {
        print("FAILED: ");
        print(name);
        print("\n");
        exit(2);
    }
    return 0;
}

fn compare_params(x, y) {
    if x == y {
        return 1;
    }
    return 0;
}

fn main() {
    let mut result;
    
    assert(1, 1, "return 1");
    
    assert(compare_params(5, 5), 1, "compare_params(5,5)");
    
    assert(5 + 3, 8, "5+3");
    
    assert(10 - 4, 6, "10-4");
    
    assert(6 * 7, 42, "6*7");
    
    assert(20 / 4, 5, "20/4");
    
    assert(10 % 3, 1, "10%3");
    
    assert(2 + 3 * 4, 14, "2+3*4");
    
    assert((2 + 3) * 4, 20, "(2+3)*4");
    
    assert(10 - 2 * 3, 4, "10-2*3");
    
    assert((10 - 2) * 3, 24, "(10-2)*3");
    
    assert(2 == 2, 1, "2==2");
    
    assert(2 != 3, 1, "2!=3");
    
    assert(2 == 3, 0, "2==3");
    
    assert(2 != 2, 0, "2!=2");
    
    assert(2 < 3, 1, "2<3");
    
    assert(3 < 2, 0, "3<2");
    
    assert(2 <= 2, 1, "2<=2");
    
    assert(2 <= 3, 1, "2<=3");
    
    assert(3 <= 2, 0, "3<=2");
    
    assert(3 >> 1, 1, "3>>1");
    
    assert(4 >> 1, 2, "4>>1");
    
    assert(4 << 1, 8, "4<<1");
    
    assert(1 << 3, 8, "1<<3");
    
    assert(1 & 3, 1, "1&3");
    
    assert(7 & 3, 3, "7&3");
    
    assert(5 ^ 3, 6, "5^3");
    
    assert(5 | 2, 7, "5|2");
    
    assert(1 || 0, 1, "1||0");
    
    assert(0 || 1, 1, "0||1");
    
    assert(0 || 0, 0, "0||0");
    
    assert(1 && 1, 1, "1&&1");
    
    assert(1 && 0, 0, "1&&0");
    
    assert(0 && 1, 0, "0&&1");
    
    assert(0 && 0, 0, "0&&0");
    
    let mut a;
    a = 0;
    assert(a, 0, "variable a = 0");
    
    let mut b;
    b = 1;
    assert(b, 1, "variable b = 1");
    
    let mut c;
    c = 2 + 3 * 4;
    if c % 2 == 0 {
        c = 9;
    } else {
        c = 34;
    }
    assert(c, 9, "if-else test");
    
    let mut d;
    d = 0;
    while d < 5 {
        d = d + 1;
    }
    assert(d, 5, "while loop");
    
    let mut e;
    e = 1;
    while e < 10 {
        e = e * 2;
    }
    assert(e, 16, "while loop 2");
    
    let mut f;
    f = 5;
    let mut x;
    x = switch f {
        1 => 3,
        2 => 6,
        5 => 10,
    };
    assert(x, 10, "switch expression");
    
    assert(test_func(), 7, "function call test_func()");
    
    assert(add(3, 4), 7, "function call add(3, 4)");
    
    print("All tests passed!\n");
    exit(0);
}
